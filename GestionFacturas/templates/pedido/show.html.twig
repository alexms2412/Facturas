{% extends 'menu.html.twig' %}


{% block contenido %}


	<a href="{{ path('app_pedido_index') }}">Atras /</a>

	<a href="{{ path('app_pedido_edit', {'id': pedido.id}) }}">Editar</a>

	<div class="container">

		<div class="nombreEmpresaFactura">
			<h1>
				<i class="fa fa-file-text-o" aria-hidden="true"></i>
				{{ pedido.empresa.getNombreEmpresa() }}

			</h1>

			<h5>
				({{ pedido.estado ? 'Factura' : 'Pedido' }})</h5>

		</div>

		<div class="posicionDatosFactura">

			<p>
				N.
				{{ pedido.estado ? 'Factura' : 'Pedido' }}
				: ES-{{pedido.getId}}</p>

			<p>
				Fecha:
				{{ pedido.fecha ? pedido.fecha|date('Y-m-d') : '' }}</p>

		</div>


		<div class="posicionDatosEmpresa">

			<h6>
				Datos fiscales:
			</h6>

			<p>
				Dirección:
				{{ pedido.empresa.getDireccion() }}</p>
			<p></p>
			<p>
				Gmail:
				{{ pedido.empresa.getCorreoElectronico() }}</p>


			<p>
				Codigo postal:
				{{ pedido.empresa.getCodigoPostal() }}</p>

			<p>
				Telefono:
				{{ pedido.empresa.getTelefono() }}</p>

			NIF:
			{{ pedido.empresa.getDni() }}</p>


	</div>

	<div class="clienteFactura">


		<h6>
			{{ pedido.estado ? 'Factura' : 'Presupuesto' }}
			a:
		</h6>

		<p>
			Nombre:
			{{ pedido.Cliente.getNombre }}</p>

		<p>
			Apellidos:
			{{ pedido.Cliente.getApellidos }}</p>

		<p>
			Dirreccion:
			{{ pedido.Cliente.getDireccion }}</p>
		<p>
			Telefono:
			{{ pedido.Cliente.getTelefono }}</p>

		<p>
			DNI:
			{{ pedido.Cliente.getDni }}</p>

	</div>

	<br>


	<table class="tablaVer">
		<thead>
			<tr>
				<th>Cantidad</th>
				<th>Descripción</th>
				<th>Nombre</th>

				<th>Precio</th>
			</tr>
		</thead>
		<tbody>

			{% set total = 0 %}

			{% for detalle in detalles %}

				{% if  detalle.pedido.getId()   ==  pedido.id  %}

					<tr>
						<td>{{ detalle.Cantidad }}</td>
						<td>{{ detalle.producto.getDescripcion() }}</td>
						<td>{{ detalle.producto.getNombre() }}</td>
						<td>{{ detalle.precio }}
							€</td>

					</tr>

					{% set total = total + detalle.Cantidad *  detalle.precio  %}

				{% endif %}


			{% else %}
				<tr>
					<td colspan="4">no records found</td>
				</tr>
			{% endfor %}


		</tbody>

	</div>


</tbody></table><h5 class="posicionPrecioTotal">
Total
{{ pedido.estado ? 'factura' : 'presupuesto' }}:
				   &nbsp;&nbsp;{{ total }}
€</h5><h6 class="firma">Firma:</h6><hr class="firmaHr"></div>{{ include('pedido/_delete_form.html.twig') }}{% endblock %}
